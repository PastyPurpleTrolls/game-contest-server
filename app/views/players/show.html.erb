<% setTitle("Player") %>
<br>
<ol class="breadcrumb">
    <li><a href="<%= root_path %>">Home</a></li>
    <li><a href="<%= contests_path %>">Contests</a></li>
    <li><a href="<%= contest_path(@player.contest) %>"><%= @player.contest.name %></a></li>
    <li class="active"><%= @player.name %></li>
</ol>
<div class="row">
    <div class="center display-container col-md-offset-1 col-md-10">
        <div class="row">
            <div class="col-xs-8 col-xs-offset-2">
                <h1 class="headings left"><%= @player.name %></h1>
            </div>
            <% if current_user&.can_edit_player?(@player) %>
                <div class="col-xs-2 right form-dropdown">
                    <div class="dropdown">
                        <a href="#" class="dropdown-toggle btn" data-toggle="dropdown">
                            Options <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <% if current_user.can_edit_player?(@player) %>
                                <%= active_link_to 'Edit', edit_player_path(@player), wrap_tag: :li %>
                            <% end %>
                            <% if current_user.can_delete_player?(@player) %>
                                <%= active_link_to 'Delete', player_path(@player), method: :delete,
                                                   data: { confirm: 'Are you sure?' }, wrap_tag: :li %>
                            <% elsif current_user.can_delete_player_with_warning?(@player) %>
                                <%= active_link_to 'Delete', player_path(@player), method: :delete,
                                                   data: {confirm: 'Deleting this player will delete all associating matches. Are you sure you want to do this?'},
                                                   wrap_tag: :li %>
                            <% end %>
                        </ul>
                    </div>
                </div>
            <% end %>
        </div>
        <div class="row">
            <div class="col-md-12">            
                <p class="info-container">Description: <%= @player.description %></p>
            </div>
            <div class="col-md-6">
                <p class="info-container">Contest: <%= link_to @player.contest.name, @player.contest %></p>
            </div>
            <div class="col-md-6">
                <p class="info-container">Creator: <%= link_to @player.user.username, @player.user %></p>
            </div>
        </div>
        <% if @player.playable %>
            <p>This player can be challenged <%= content_tag('i', nil, class: 'glyphicon glyphicon-ok') %></p>
        <% else %>
            <p>This player cannot be challenged <%= content_tag('i', nil, class: 'glyphicon glyphicon-remove') %></p>                
        <% end %>
        <% if @player.downloadable %>
            <p>This player can be downloaded <%= content_tag('i', nil, class: 'glyphicon glyphicon-ok') %></p><!-- need link here -->
        <% else %>
            <p>This player cannot be downloaded <%= content_tag('i', nil, class: 'glyphicon glyphicon-remove') %></p>                
        <% end %>
    </div>
</div>

<div class="row">
    <%= render partial: 'statistics' %>
    <%= render partial: 'player_matches' %>
</div>