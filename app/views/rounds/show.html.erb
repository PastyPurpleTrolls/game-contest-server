<% content_for :javascript_includes do %>
    <%= javascript_include_tag Rails.root.join(url_for(@referee), "assets", "script.js") %>
<% end %>

<h1>Round Information</h1>
<p>Round <%= @round.id %> for <%= link_to "Match " + @round.match_id.to_s, @round.match %></p>
<h2>Results</h2>
	<ol>
		 <%= render partial: 'player_rounds/player_links',
		 		collection: @round.player_rounds,
				as: 'player_round' %> 
	</ol>
<script>
 	console.log(PIXI);

	var stage = new PIXI.Stage(0x66FF99);

	var renderer = PIXI.autoDetectRenderer(722, 728,{backgroundColor: 0x1099bb});

	document.body.appendChild(renderer.view);

	requestAnimationFrame( animate );

	var checkerboard = PIXI.Texture.fromImage("checkers_assets/checkerboard.png");
	var white = PIXI.Texture.fromImage("checkers_assets/white.png");
	var black = PIXI.Texture.fromImage("checkers_assets/black.png");
	var whiteKing = PIXI.Texture.fromImage("checkers_assets/whiteKing.png");
	var blackKing = PIXI.Texture.fromImage("checkers_assets/blackKing.png");

	var c = new PIXI.Sprite(checkerboard);

	var num_white = 12;
	var num_black = 12;

	var w = [];
	var b = [];

	//Create all the sprites for white and black pieces 
	for (var i = 0; i < 12; i++){ 
		w[i] = new PIXI.Sprite(white);
		b[i] = new PIXI.Sprite(black);
	}
	console.log(w);

	//Store position for each tile on the board
	// var board = {
 //        A: [[90, 0], [270, 0], [450, 0], [630, 0]],
 //        B: [[0, 91], [180]]
 //    }

	//Set starting positions for board and pieces
	c.position.x = -1;

	x_pos = 90;
	y_pos = 0;

	for (var i = 0; i < 12; i++){
		w[i].position.x = x_pos;
		w[i].position.y = y_pos;

		if (x_pos == 630){
			x_pos = 0;
			y_pos += 91;
		}
		else if (x_pos == 540){ 
			x_pos = 90;
			y_pos += 91;
		}
		else x_pos += 180;
	}

	x_pos = 0;
	y_pos = 455;

	for (var i = 0; i < 12; i++){
		b[i].position.x = x_pos;
		b[i].position.y = y_pos;

		if (x_pos == 630){
			x_pos = 0;
			y_pos += 91;
		}
		else if (x_pos == 540){ 
			x_pos = 90;
			y_pos += 91;
		}
		else x_pos += 180;
	}	
	
	//Add children to stage
	stage.addChild(c);
	for (var i = 0; i < 12; i++){ 
		w[i] = stage.addChild(w[i]);
		b[i] = stage.addChild(b[i]);
	}

	function animate() {
	    requestAnimationFrame( animate );

	    // render the stage   
	    renderer.render(stage);
	}

</script>
 
